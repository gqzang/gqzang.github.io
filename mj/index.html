<!DOCTYPE html>
<html>
<head>

<style>
.container {
  display: grid;
  grid-template-columns: auto auto auto;
  background-color: white;
  border: 0px solid white;
  padding: 4px;
}
.container > div {
  background-color: #f1f1f1;
  border: 1px solid black;
  padding: 4px;
  font-size: 24px;
  text-align: center;
}

.player {
  display: grid;
  grid-template-columns: auto auto auto auto;
  background-color: dodgerblue;
  padding: 4px;
}
.player > div {
  background-color: #f1f1f1;
  border: 1px solid black;
  padding: 4px;
  font-size: 24px;
  text-align: center;
}

input[type="text"]{ 
  padding: 1px 1px; 
  font-size: 24px;
}

textarea { 
  font-size: 24px; 
  resize: none;
}

</style>
</head>
<body>
<!-- refert to https://www.w3schools.com/css/tryit.asp?filename=trycss_grid  -->

<h1>Mahjong</h1>
<p></p>

<div class="container">
  <div></div>
  <div>
    <div class="player" id="X2">
      <div>Point<br>
        <input type="text" id="P2" value="800" size="4">
      </div>
      <div>Cloth<br>
        <input type="text" id="C2" value="5" readonly size="1">
      </div>
      <div>Debt<br>
        <input type="text" id="D2" value="0" readonly size="4">
      </div>  
      <div>Gain<br>
        <input type="text" id="G2" value="0" readonly size="4">
      </div>  
    </div>
  </div>
  <div></div>  
  <div>
    <div class="player" id="X3">
      <div>Point<br>
        <input type="text" id="P3" value="600" readonly size="4">
      </div>
      <div>Cloth<br>
        <input type="text" id="C3" value="5" readonly size="1">
      </div>
      <div>Debt<br>
        <input type="text" id="D3" value="0" readonly size="4">
      </div>  
      <div>Gain<br>
        <input type="text" id="G3" value="0" readonly size="4">
      </div>  
    </div>
  </div>
  <div></div>
  <div>
    <div class="player" id="X1">
      <div>Point<br>
        <input type="text" id="P1" value="600" readonly size="4">
      </div>
      <div>Cloth<br>
        <input type="text" id="C1" value="5" readonly size="1">
      </div>
      <div>Debt<br>
        <input type="text" id="D1" value="0" readonly size="4">
      </div>  
      <div>Gain<br>
        <input type="text" id="G1" value="0" readonly size="4">
      </div>  
    </div>
  </div>
  <div></div>
  <div>
    <div class="player" id="X0">
      <div>Point<br>
        <input type="text" id="P0" value="1000" size="4">
      </div>
      <div>Cloth1<br>
        <input type="text" id="C01" value="0" readonly size="1">
      </div>
      <div>Cloth2<br>
        <input type="text" id="C02" value="0" readonly size="1">
      </div>  
      <div>Cloth3<br>
        <input type="text" id="C03" value="0" readonly size="1">
      </div>  
    </div>
  </div>
  <div></div>  
  <div>
    <div class="player" id="prob">
      <div>WP 0<br>
        <input type="text" id="wp0" value="40" readonly size="2">
      </div>
      <div>WP 1<br>
        <input type="text" id="wp1" value="18" size="2" onchange="setWinProb()">
      </div>
      <div>WP 2<br>
        <input type="text" id="wp2" value="24" size="2" onchange="setWinProb()">
      </div>  
      <div>WP 3<br>
        <input type="text" id="wp3" value="18" size="2" onchange="setWinProb()">
      </div>  
    </div> 
  </div>
  <div>
    <div class="container" id="info">
      <div>Game<br>
        <input type="text" id="gcnt" value="0" readonly size="2">
      </div>
      <div>Time<br>
        <input type="text" id="gtime" value="500" size="2">
      </div>
      <div>Batch<br>
        <input type="text" id="batch" value="10" size="2">
      </div>
    </div>
  </div>  
</div>

<textarea id="game" rows="27" cols="81"></textarea>
<script>
  // document.getElementById("X2").style.backgroundColor = "red"
  document.getElementById("prob").style.backgroundColor = "purple"
  document.getElementById("info").style.backgroundColor = "green"

  function getRandomIntInclusive(min, max) {
    min = Math.ceil(min);
    max = Math.floor(max);
    return Math.floor(Math.random() * (max - min + 1) + min);
  }

  var wps;
  function setWinProb() {
    wp1 = document.getElementById("wp1").value
    wp2 = document.getElementById("wp2").value
    wp3 = document.getElementById("wp3").value
    wp0 = 100 - wp1 - wp2 - wp3
    document.getElementById("wp0").value = wp0
    wps = [wp0, wp1, wp2, wp3]
    console.log(wps)
  }
  setWinProb()
  
  function logGame(txt) {
    gcnt = parseInt(document.getElementById("gcnt").value) + 1
    document.getElementById("gcnt").value = gcnt
    const gameLog = document.getElementById('game')
    gameLog.value += gcnt.toString().padStart(3, '0') + '> ' + txt + '\n'
    gameLog.scrollTop = gameLog.scrollHeight
  }

  function delay(ms) {
    return new Promise(resolve => setTimeout(resolve, ms))
  }

  function playOneGame() {

  }

  async function playMJ() {
    while(true) {
        for (let i = 0; i < document.getElementById("batch").value; i++) {
        res = playOneGame()
        logGame(i)
        await delay(document.getElementById("gtime").value)
      }     
      if( ! confirm("Do you want to continue?") ) {
        break
      }
    }
  }

  playMJ();
</script>

</body>
</html>